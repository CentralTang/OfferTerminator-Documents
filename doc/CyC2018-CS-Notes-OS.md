# 技术面试必备基础知识-操作系统

> 在线阅读：[CS-Notes-OS](https://cyc2018.github.io/CS-Notes/#/README?id=%f0%9f%92%bb-%e6%93%8d%e4%bd%9c%e7%b3%bb%e7%bb%9f)

## 操作系统
### 概述

#### 基本特征
##### 并发
- 并发是指宏观上在一段时间内能同时运行多个程序，而并行则指同一时刻能运行多个指令。
- 并行需要硬件支持，如多流水线、多核处理器或者分布式计算系统。
- 操作系统通过引入进程和线程，使得程序能够并发运行。

##### 共享
- 共享是指系统中的资源可以被多个并发进程共同使用。

- 有两种共享方式：互斥共享和同时共享。
	- `互斥共享`：互斥共享的资源称为 `临界资源`，在同一时刻只允许一个进程访问，需要用同步机制来实现互斥访问。典型问题是 `打印机共享访问`。
	- `进程同步`：在多道程序环境下，进程是并发执行的，不同进程之间存在着不同的相互制约关系。典型的问题有 `生产消费者问题`、`哲学家进餐问题` 等。

##### 虚拟
- 虚拟技术把一个物理实体转换为多个逻辑实体。主要有两种虚拟技术：时 (时间) 分复用技术和空 (空间) 分复用技术。
	- `时分复用技术`：多个进程能在同一个处理器上并发执行使用了时分复用技术，让每个进程轮流占用处理器，每次只执行一小个时间片并快速切换。
	- `空分复用技术`：虚拟内存使用了空分复用技术，它将物理内存抽象为地址空间，每个进程都有各自的地址空间。地址空间的页被映射到物理内存，地址空间的页并不需要全部在物理内存中，当使用到一个没有在物理内存的页时，执行页面置换算法，将该页置换到内存中。

####  异步
- 异步指进程不是一次性执行完毕，而是走走停停，以不可知的速度向前推进。

#### 基本功能
#### 系统调用
#### 大内核和微内核
#### 中断分类

### 进程管理
#### 进程
- 进程是 `资源分配` 的基本单位。
- 进程控制块 (Process Control Block, PCB) 描述进程的 `基本信息` 和 `运行状态`，所谓的创建进程和撤销进程，都是指对 PCB 的操作。
- 下图显示了 4 个程序创建了 4 个进程，这 4 个进程可以并发地执行。

	| ![图2-1进程图示](img/CyC2018-CS-Notes-OS_2-1.png) |
	| :---: |
	| 图 2-1 进程图示 |

#### 线程
- 线程是 `独立调度` 的基本单位。
- 一个进程中可以有多个线程，它们共享进程资源。

	> QQ 和浏览器是两个进程，浏览器进程里面有很多线程。例如 HTTP 请求线程、事件响应线程、渲染线程等，线程的并发执行使得在浏览器中点击一个新链接从而发起 HTTP 请求时，浏览器还可以响应用户的其它事件。
	
	| ![图2-2线程图示](img/CyC2018-CS-Notes-OS_2-2.png) |
	| :---: |
	| 图 2-2 线程图示 |

#### 进程和线程的区别
- `拥有资源`：进程是 `资源分配` 的基本单位，但是线程不拥有资源，线程可以访问隶属进程的资源。

- `调度`：线程是 `独立调度` 的基本单位，在同一进程中，线程的切换不会引起进程切换。但是从一个进程中的线程切换到另一个进程中的线程时，会引起进程切换。

- `系统开销`：由于创建或撤销进程时，系统都要为之分配或回收资源，如内存空间、I/O 设备等，所付出的开销远大于创建或撤销线程时的开销。类似地，在进行进程切换时，涉及当前执行进程 CPU 环境的保存及新调度进程 CPU 环境的设置，而线程切换时只需保存和设置少量寄存器内容，开销很小。

- `通信方面`：线程间可以通过直接读写同一进程中的数据进行通信，但是进程通信需要借助  `IPC` (进程间通信，Inter-Process Communication)。

### 进程通信
- 进程同步与进程通信很容易混淆，它们的区别在于：
	- 进程同步：控制多个进程按一定顺序执行；
	- 进程通信：进程间传输信息。
- 进程通信是一种 `手段`，而进程同步是一种 `目的`。即为了能够达到 `进程同步的目的`，需要让 `进程进行通信`，传输一些进程同步所需要的信息。

#### 管道
- 管道是通过调用 `pipe()` 函数创建的，`fd[0]` 用于读，`fd[1]` 用于写

#### 命名管道
- 命名管道是一种 FIFO (First-In First-Out，先进先出）对象。去除了管道只能在父子进程中使用的限制。

	```c
	#include <sys/stat.h>
	int mkfifo(const char *path, mode_t mode);
	int mkfifoat(int fd, const char *path, mode_t mode);
	```
	
- FIFO 常用于客户-服务器应用程序中，FIFO 用作汇聚点，在客户进程和服务器进程之间传递数据。

	| ![图2-3FIFO在客户进程和服务器进程之间传递数据](img/CyC2018-CS-Notes-OS_2-3.png) |
	| :---: |
	| 图 2-3 FIFO在客户进程和服务器进程之间传递数据 |

#### 消息队列
- 相比于 FIFO，消息队列具有以下优点：

	- 消息队列可以独立于读写进程存在，从而避免了 FIFO 中同步管道的打开和关闭时可能产生的困难；

	- 避免了 FIFO 的同步阻塞问题，不需要进程自己提供同步方法；

	- 读进程可以根据消息类型有选择地接收消息，而不像 FIFO 那样只能默认地接收。

#### 信号量
- 它是一个计数器，用于为多个进程提供对共享数据对象的访问。

#### 共享存储
- 需要使用信号量用来同步对共享存储的访问。
- 允许多个进程共享一个给定的存储区。因为数据不需要在进程之间复制，所以这是最快的一种 IPC。
- 多个进程可以将同一个 `文件映射到它们的地址空间` 从而实现共享内存。另外 XSI 共享内存不是使用文件，而是使用内存的匿名段。

#### 套接字
- 与其它通信机制不同的是，它可用于不同机器间的进程通信。

### 死锁
### 内存管理
### 设备管理
### 链接

## Linux
### 常用操作以及概念
### 磁盘
### 分区
### 文件系统
### 文件
### 压缩与打包
### Bash
### 管道指令
### 正则表达式
### 进程管理